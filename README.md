# âœ¨ï¸ æ¦‚è¿°
ä¸€ä¸ªAPIæ¥å£å®ç°æ‰€æœ‰è¡¨çš„å¢åˆ æ”¹æŸ¥æ“ä½œã€‚\
\
æ²¡æœ‰ä»»ä½•ç¬¬ä¸‰æ–¹ä¾èµ–ï¼Œå®¹æ˜“é›†æˆã€‚\
\
èƒ½å®ç°å¤æ‚çš„æŸ¥è¯¢ï¼Œæ”¯æŒä¸»å­è¡¨åˆ†é¡µã€‚\
\
ä¸°å¯Œçš„æ‰©å±•ç‚¹ï¼šå­—å…¸ç¿»è¯‘ã€æ•°æ®æƒé™ã€ä¸»é”®ç­–ç•¥ã€é€»è¾‘åˆ é™¤ç­‰ç­‰ã€‚\
\
è¯¦ç»†æ–‡æ¡£å¯è§[wiki](https://gitee.com/hhsunshine/one-api/wikis/%E5%89%8D%E8%A8%80)ã€‚

-----

# ğŸ“• èƒŒæ™¯
ä½œè€…æ›¾æ·±é™·CRUDæ³¥æ½­ï¼Œæ¯å¤©çœ‹ä¼¼å¿™å¿™ç¢Œç¢Œï¼ŒæŠ€æœ¯å’Œçœ¼ç•Œå´æ²¡æœ‰å¾ˆå¤§æå‡ï¼Œç©¶å…¶æ ¹æœ¬ï¼Œå·¥ä½œä¹‹ä½™ï¼Œç•™ç»™è‡ªå·±æå‡çš„æ—¶é—´å¤ªå°‘ã€‚\
\
one-apiç§‰ç€è·³å‡ºæ³¥æ½­çš„åˆè¡·ï¼Œæƒ³é€šè¿‡ä¸€ä¸ªæ¥å£å°½é‡åšæ›´å¤šçš„äº‹æƒ…ï¼Œæ‰”æ‰crudï¼Œä¸“æ³¨ä¸šåŠ¡å’ŒæŠ€æœ¯ã€‚\
\
å¦‚æœä½ ä¹Ÿæœ‰ç›¸ä¼¼çš„è‹¦æ¼ï¼Œå¯ä»¥è¯•è¯•one-apiã€‚

----

# â˜€ï¸ äº®ç‚¹
- ä¸€ä¸ªæ¥å£æ”¯æŒæ‰€æœ‰è¡¨çš„å¢ã€åˆ ã€æ”¹ã€æŸ¥
- æ— ä»»ä½•ç¬¬ä¸‰æ–¹ä¾èµ–ï¼ŒåŒ…ä½“ç§¯å¾ˆå°ï¼Œå¯¹ç°æœ‰ç³»ç»Ÿä¸ä¼šé€ æˆä»»ä½•å½±å“ï¼Œä¸€åˆ†é’Ÿå†…å°±å¯å®Œæˆé›†æˆå·¥ä½œ
- æ”¯æŒåˆ†é¡µæŸ¥è¯¢ï¼Œå¤šè¡¨å…³è”æŸ¥è¯¢ï¼Œæ”¯æŒlikeã€inã€betweenã€is nullã€=ç­‰æ¡ä»¶ï¼Œæ”¯æŒæ‹¬å·ï¼Œæ”¯æŒorè¿æ¥
- æ”¯æŒæ‰¹é‡åˆ é™¤ã€æ›´æ–°å’Œæ’å…¥ï¼Œæ›´æ–°å¯è®¾ç½®å¤šä¸ªæ¡ä»¶ï¼›æ‰¹é‡æ’å…¥ä¸ºæ•°æ®åº“æ”¯æŒçš„æ‰¹é‡sqlï¼Œæ•ˆç‡é«˜
- æ”¯æŒçš„æ‰©å±•åŠŸèƒ½å¾ˆå¤šï¼šåˆ«åè®¾ç½®ã€å­—å…¸ç¿»è¯‘ã€ä¸»é”®ç”Ÿæˆã€è‡ªåŠ¨å¡«å……ã€é€»è¾‘åˆ é™¤ã€sqlæ‰“å°ã€æ•°æ®æƒé™ç­‰
- æ”¯æŒå¤šæ•°æ®æºï¼Œä¸€ä¸ªæ•°æ®æºå¯¹åº”ä¸€ä¸ªæ¥å£
- ç›®å‰æ”¯æŒmysqlå’Œoracleï¼Œå…¶ä»–æ•°æ®åº“æ­£åœ¨é€‚é…ä¸­â€¦â€¦

# â˜€ï¸ æ”¯æŒæ‰©å±•ç‚¹
- åˆ«åè®¾ç½®
- å­—å…¸ç¿»è¯‘
- ä¸»é”®ç”Ÿæˆ
- è‡ªåŠ¨å¡«å……
- é€»è¾‘åˆ é™¤
- sqlæ‰“å°
- æ•°æ®æƒé™
- æ•°æ®é¢„çƒ­
---

# ä½¿ç”¨è¯´æ˜
> é›†æˆwebæ¡†æ¶ï¼Œä»¥springbootæ¥ä¸¾ä¾‹
- pomå¼•å…¥
    ```
    <dependency>
         <groupId>com.yz</groupId>
         <artifactId>one-api</artifactId>
         <version>1.0-SNAPSHOT</version>
    </dependency>
    ```
- æ–°å»ºæ¥å£ 
  ```
  @RequestMapping("/one/api")
  @RestController
  public class OneApi implements InitializingBean {

    @Autowired
    private DataSource dataSource;
    private OneApiConfig oneApiConfig;

    @PostMapping()
    public ResultWrapper one(@RequestBody Map<String, Object> map) throws SQLException {
        RoutingExecutor routingExecutor = oneApiConfig.getParseExecutor();
        return routingExecutor.execute(map);
    }

    @Override
    public void afterPropertiesSet() throws Exception {
        //é…ç½®
        oneApiConfig = new OneApiConfig(dataSource);
        //è®¾ç½®æ‰©å±•ç‚¹
        oneApiConfig.setInterceptor(new TestInterceptor());
        oneApiConfig.postProcess();
    }
  }

  ```
- æ¥å£è°ƒç”¨
> æ–°å¢
>> å‚æ•°
```
{
    "user": [{
        "name": "leo",
        "age": 5,
        "phoneNumber": 12342345345,
        "isLogin": 1,
        "sex": "m",
        "roleCode": "admin",
        "address": "åŒ—äº¬-äº”é“å£-æ˜Ÿå·´å…‹"
    },{
        "name": "jack",
        "age": 21,
        "phoneNumber": 734829,
        "isLogin": 1,
        "sex": "f",
        "roleCode": "normal",
        "address": "å±±ä¸œ-ç« ä¸˜-å¤§è‘±"
    }],
    "role": [
      {
        "code": "admin",
        "label": "ç®¡ç†å‘˜"
      },
      {
        "code": "normal",
        "label": "æ™®é€šè§’è‰²"
      },
      {
        "code": "manager",
        "label": "ç»ç†"
      },
      {
        "code": "example",
        "label": "ç¤ºä¾‹è§’è‰²"
      }
    ]
}
```
> æ–°å¢
>> è¿”å›å€¼
```
{
    "user": 2,
    "role": 4
}
```
> æŸ¥è¯¢
>> å‚æ•°
```
{
   "user":{
     "address@|":"like %äº”é“å£%",
     "createTime@":"between 2012-01-01 11:11:11,2042-03-01",
     "roleCode@": "in admin,manager,example",
     "@order":"createTime desc",
     "@page": 1,
     "@size": 3,
     "role":{
         "code@":"/user/roleCode"   
     }
   }
}
```
> æŸ¥è¯¢
>> è¿”å›å€¼
```
{
    "user": {
        "total": 1,
        "size": 3,
        "page": 1,
        "data": [
            {
                "editor": 124,
                "creator": 123,
                "address": "åŒ—äº¬-äº”é“å£-æ˜Ÿå·´å…‹",
                "role": [
                    {
                        "editor": 124,
                        "creator": 123,
                        "code": "admin",
                        "createTime": "2023-08-03T10:14:10.000+0000",
                        "editTime": "2023-08-03T10:14:10.000+0000",
                        "id": 37,
                        "label": "ç®¡ç†å‘˜"
                    }
                ],
                "sex": "ç”·",
                "editTime": "2023-08-03T10:15:01.000+0000",
                "isLogin": 1,
                "phoneNumber": "12342345345",
                "createTime": "2023-08-03T10:15:01.000+0000",
                "roleCode": "admin",
                "name": "leo",
                "roleName": "ç®¡ç†å‘˜",
                "id": 739546816869040128,
                "age": 5
            }
        ]
    }
}
```
> æ›´æ–°
>> å‚æ•°
```
{
    "user": [{
        "id": 739546816869040128,
        "address": "åŒ—äº¬-äº”é“å£-æ£ç³•"
    }]
}
```
> æ›´æ–°
>> è¿”å›å€¼
```
{
    "user": 1
}
```
> åˆ é™¤
>> å‚æ•°
```
{
    "user":[123, 234]
}
```
> åˆ é™¤
>> è¿”å›å€¼
```
{
    "user": 2
}
```
- æ•°æ®å±•ç¤ºå›¾ï¼ŒæŠŠè¡¨ä¿¡æ¯å’Œæ‰©å±•ä¿¡æ¯éƒ½åœ¨å›¾ä¸Šå±•ç¤ºï¼Œå¯ç”¨äºå¼€å‘ç¯å¢ƒè°ƒè¯•\
  ![](https://gitee.com/yanghdhhh/docs/raw/master/oneapi%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%B1%95%E7%A4%BA.jpg)


# ğŸ™æ„Ÿè°¢
é¡¹ç›®ä¸­ä½¿ç”¨äº†å¾ˆå¤šmybaitsçš„æºç ï¼Œæ„Ÿè°¢ğŸ™ï¼Œä¸å¾—ä¸ç§°èµmybatiså†™çš„å¾ˆä¼˜é›…ã€‚


